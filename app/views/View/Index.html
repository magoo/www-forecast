{{set . "title" "Scenario"}}
{{template "header.html" .}}
{{template "navbar.html" .}}
{{template "jumbotron.html" .}}

<script>

$(document).ready(function(){

    $("input").change(function(){
      var total = 0;

      console.log( "Handler for .change() called." );
      var arr = $( " .odds " ).serializeArray();

      for (var i = 0, len = arr.length; i < len; i++) {
        console.log(arr[i].value);
        total += parseInt(arr[i].value, 10) || 0;
      }
      $("#total").val(total);

    })
});
</script>
<script>
  function del(sid){
    $.post( "/delete", { sid: sid } );
    window.location.replace("/list")
  }
</script>

<div class="container">
{{template "flash.html" .}}
  <div class="card">
      <div class="card-body">
        <h2>{{.f.Title}}</h2>
        <pre style="display:none">{{.f.Sid}}</pre>
          <p class="card-text">
            {{.f.Description}}
          </p>
          <button type="button" class="btn btn-light btn-sm" onclick="window.location='/view/{{.f.Sid}}/results'">Results</button>
          <button type="button" class="btn btn-secondary btn-sm" onclick="del({{.f.Sid}})" class="btn btn-info">Delete</button>

      </div>
  </div>

    <form action="/forecast" method="post">
      <div class="form-group">
        {{range .f.Options}}
        <div class="row">
          <div class="col-2 input-group ">
            <input name="value[]" type="text" class="form-control odds" aria-label="Percentage of possiblity">
            <div class="input-group-append">
              <span class="input-group-text">%</span>
            </div>
          </div>

          <div class="col-10">
              <li class="list-group-item">{{.}}</li>
          </div>

          <div class="col-2">
          </div>

        </div>
        {{end}}

        <div class="row">
            <div class="col-2 input-group">
              <input id="total" type="text" class="form-control" aria-label="Percentage of possiblity" readonly>
              <div class="input-group-append">
                <span class="input-group-text">%</span>
              </div>
            </div>
            <div class="col-10">
                <li class="list-group-item">Total (Must equal 100)</li>
            </div>
          </div>



      </div>

      <div class="form-group" role="group" aria-label="...">
        <input type="hidden" name="sid" value="{{.f.Sid}}"/>
        <button class="btn btn-info btn-sm" type="submit">Submit Forecast</button>
      </div>


    </form>
  </div>

{{template "footer.html" .}}
