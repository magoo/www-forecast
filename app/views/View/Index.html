{{set . "title" "Home"}}
{{template "header.html" .}}

<header class="jumbotron" style="background-color:#A9F16C">
  <div class="container">
      <h1>Scenario </h1>
      <p>{{.f.Sid}}</p>
      <a href="/view/{{.f.Sid}}/results">Results</a>
  </div>
</header>

<script>

$(document).ready(function(){

    $("input").change(function(){
      var total = 0;

      console.log( "Handler for .change() called." );
      var arr = $( " .odds " ).serializeArray();

      for (var i = 0, len = arr.length; i < len; i++) {
        console.log(arr[i].value);
        total += parseInt(arr[i].value, 10) || 0;
      }
      $("#total").val(total);

    })
});

</script>

<div class="container">

    <h2>{{.f.Title}}</h2>
    <pre>{{.f.Description}}</pre>

    <form action="/forecast" method="post">
      {{range .f.Options}}
      <div class="row">
        <div class="col-2 input-group ">
          <input name="value[]" type="text" class="form-control odds" aria-label="Percentage of possiblity">
          <div class="input-group-append">
            <span class="input-group-text">%</span>
          </div>
        </div>

        <div class="col-8">
            <li class="list-group-item">{{.}}</li>
        </div>



        <div class="col-2">
        </div>

      </div>
      {{end}}
      <div class="row">
        <div class="col-2 input-group">
          <input id="total" type="text" class="form-control" aria-label="Percentage of possiblity" readonly>
          <div class="input-group-append">
            <span class="input-group-text">%</span>
          </div>
        </div>
        <div class="col-8">
            <li class="list-group-item">Total (Must equal 100)</li>
        </div>
      </div>
      <div class = "row">
        <div class="btn-group" role="group" aria-label="...">
          <input type="hidden" name="sid" value="{{.f.Sid}}"/>
          <button class="btn btn-primary" type="submit">Submit Forecast</button>
        </div>
      </div>
      </div>
    </form>
  </div>
</div>

{{template "footer.html" .}}
